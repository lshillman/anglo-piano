<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="icon" href="./assets/images/favicon.ico" type="image/x-icon" />
	<meta name="description" content="Anglo Piano is a learning and composition tool for Anglo concertina players. Select a note or chord on the piano keyboard to see it highlighted on the Anglo keyboard.">
    <title>Anglo Piano</title>
</head>
<body>
    <header>
        <div>
            <image id="logo" src="./assets/images/logo.svg"/>
            <h1>Anglo Piano</h1>
        </div>
        <div>
            <button id="keyboardShortcutsBtn"></button>
            <button id="about">About</a>
        </div>
    </header>
    <div id="viewer">
    <div id="keyboard-container">
        <div id="keyboard">
            <!-- piano keys -->
        </div>
    </div>
    <div id="chords">
        <button id="major" class="selected" onclick="findChord('maj')">Maj</button><button id="minor" onclick="findChord('min')">min</button><button id="diminished" onclick="findChord('dim')">dim</button><button id="seventh" onclick="findChord('7')">7</button><button id="major7" onclick="findChord('maj7')">Maj7</button><button id="minor7" onclick="findChord('min7')">min7</button>
    </div>

    <div id="anglo-container">
        <div id="anglo-keyboard">
            <!-- concertina buttons -->
        </div>
    </div>

    <div id="viewer-options">
        <div>
            <select id="layout">
                <!-- layouts -->
            </select>
            <div id="drone-option">
                <input type="checkbox" id="drone" name="drone" checked="checked">
                <label for="drone"> Drone key</label>
            </div>
            <div>
                <button id="editLayoutBtn">Edit layout</button>
                <button id="getLinkBtn">Get link</button>
            </div>
            <div>
                <button id="addToLayoutsBtn">Add to your layouts</button>
                <button id="removeFromLayoutsBtn">Remove from your layouts</button>
            </div>
        </div>
        <div>
            <div>
                <input type="radio" id="pushpull" name="bellows" value="pushpull" checked>
                <label for="pushpull">push or pull</label>
            </div>
            <div>
                <input type="radio" id="push" name="bellows" value="push">
                <label for="push">push only</label>
            </div>
            <div>
                <input type="radio" id="pull" name="bellows" value="pull">
                <label for="pull">pull only</label>
            </div>
        </div>

        <div>
            <!-- <div>
                <input type="checkbox" id="matchoctave" name="matchoctave" checked="checked">
                <label for="matchoctave"> Match octave</label>
            </div> -->
            <div>
                <input type="checkbox" id="multiselect" name="multiselect" value="false">
                <label for="multiselect">Select multiple notes [shift]</label>
            </div>
            <div>
                <input type="checkbox" id="coloroctave" name="coloroctave" value="false">
                <label for="coloroctave">Color octaves</label>
            </div>
            <div>
                <input type="checkbox" id="absent-notes" name="absent-notes" value="true" checked="checked">
                <label for="absent-notes">Gray out absent notes</label>
            </div>
            <div>
                <input type="checkbox" id="concertina-labels" name="concertina-labels" value="true" checked="checked">
                <label for="concertina-labels">Concertina labels</label>
            </div>
            <div>
                <input type="checkbox" id="piano-labels" name="piano-labels" value="true" checked="checked">
                <label for="piano-labels">Piano labels</label>
            </div>
            <div>
                <input type="checkbox" id="accidentals" name="accidentals" value="true">
                <label for="accidentals">Alternate accidental spellings</label>
            </div>
        </div>
    </div>
    </div>

    <div id="editor">
        <div id="editor-header">
            <input type="text" maxlength="120" id="layoutTitle" placeholder="Untitled layout">
            <div id="editor-actions">
                <button id="cancelBtn">Cancel</button>
                <button id="finishedBtn">Finished</button>
            </div>
        </div>
        <div id="editor-error">
            <span class="error-text">Please correct the notes outlined in red. Buttons must have a valid push note and pull note in the range of D2 - D7. Notes must include octave numbers. Use ‘b’ for flat and ‘#’ for sharp.</span>
        </div>
        <div id="editor-anglo-container">
            <div id="editor-anglo-keyboard">
                <!-- button text inputs -->
            </div>
        </div>
        
        <div id ="editor-options-container">
            <div id="mobile-note-picker">
                <div id="mobile-notes">
                    <button>C</button>
                    <button>D</button>
                    <button>E</button>
                    <button>F</button>
                    <button>G</button>
                    <button>A</button>
                    <button>B</button>
                </div>
                <div id="mobile-accidental">
                    <button>♯</button>
                    <button>♭</button>
                </div>
                <div id="mobile-octave">
                    <button>2</button>
                    <button>3</button>
                    <button>4</button>
                    <button>5</button>
                    <button>6</button>
                    <button>7</button>
                </div>
            </div>
        <div id="editor-options">
            <div>
                <span>Note:</span>
                <button id="noteUp" title="Transpose note up [up]"><span class="arrow up"></button>
                <button id="noteDown" title="Transpose note down [down]"><span class="arrow down"></span></button>
            </div>
            <div>
                <span>Button:</span>
                <button id="moveLeftBtn" title="Move button left [shift + left]"><span class="arrow left"></span></button>
                <button id="moveRightBtn" title="Move button right [shift + right]"><span class="arrow right"></span></button>
            </div>
            <div>
                <span>Insert...</span>
                <button id="insertLeftBtn" title="Insert a button to the left">Button left</button>
                <button id="insertRightBtn" title="Insert a button to the right">Button right</button>
                <button id="newRowBtn" title="Insert a new row">New row</button>
            </div>
            <div>
                <span>Delete</span>
                <button id="deleteBtn" title="Delete current button [shift + backspace]">Delete button</button>
            </div>
            <div>
                <span>Layout:</span>
                <button id="layoutUp" title="Transpose entire layout up"><span class="arrow up"></button>
                <button id="layoutDown" title="Transpose entire layout down"><span class="arrow down"></span></button>
            </div>
        </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="about-modal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>About Anglo Piano</h2>
            <p class="copyright">&copy; MMXXII Luke Hillman</p>
            <p>Anglo Piano is a learning, composition, and layout exploration tool for Anglo concertina players. You can use it to figure out how to play difficult melodies and chords, design and share your ideal keyboard layout, or just use it as a reference to compare different concertinas.</p>
            <p>However you end up using it, I’d love to know so I can make improvements! Contact me via <a href="https://www.concertina.net/forums/index.php?/topic/24636-anglo-piano-webapp/" target="_blank" rel="noreferrer noopener">concertina.net</a>, <a rel="me noreferrer noopener" href="https://wandering.shop/@luke" target="_blank">mastodon</a>, <a href="https://www.youtube.com/lshillman" target="_blank" rel="noreferrer noopener">youtube</a>, or email to ‘hi’ at this domain.</p>
            <p>If you feel like it, you can <a href="https://ko-fi.com/luuke" target="_blank" rel="noreferrer noopener">buy me a coffee</a>.</p>
            <p>Or <a href="https://linkedin.com/in/lshillman/" target="_blank" rel="noreferrer noopener">offer me a job</a>.</p>
        </div>

    </div>

    <div id="remove-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Remove layout?</h2>
            <p id="confirmRemoveMsg">Do you really want to remove LAYOUT_NAME from your layouts?</p>
            <div class="modal-actions">
                <button id="cancelRemoveBtn" onclick="closeModal()">Cancel</button>
                <button id="finalRemoveBtn" class="destructive" onclick="removeUserLayout()">Remove</button>
            </div>
        </div>
    </div>

    <div id="add-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Add layout</h2>
            <p>What do you want to call this layout?</p>
            <input type="text" id ="newLayoutName" placeholder="e.g., 'My custom 38b C/G'">
            <span class="error-text" id="addLayoutError">Please enter a name for this layout</span>
            <div class="modal-actions">
                <button id="cancelAddBtn" onclick="closeModal()">Cancel</button>
                <button id="addLayoutBtn" class="primary" onclick="addUserLayout()">Add layout</button>
            </div>
        </div>
    </div>

    <div id="share-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Get link</h2>
            <p>You can share or bookmark this link:</p>
            <input type="text" id ="shareLink" readonly onclick="selectShareLink()">
            <span class="success-text" id="copySuccessMsg">Link copied to clipboard.</span>
            <div class="modal-actions">
                <button onclick="closeModal()">Close</button>
                <button id="copyLinkBtn" class="primary" onclick="copyToClipboard()">Copy link</button>
            </div>
        </div>
    </div>

    <div id="parse-error-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Error reading layout</h2>
            <p>I did everything I could, but something feels wrong.</p>
            <p>Some buttons may be incorrect or missing. If you pasted a link from somewhere, make sure you copied the whole thing.</p>
            <div class="modal-actions">
                <button onclick="closeModal()">Roger roger</button>
            </div>
        </div>
    </div>

    <div id="keyboard-shortcuts-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Keyboard shortcuts</h2>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">left</span> / <span class="keyboard-button">right</span>
                </div>
                <div>
                    select the previous / next piano key
                </div>
            </div>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">shift</span> + click
                </div>
                <div>
                    select multiple notes on either keyboard
                </div>
            </div>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">1</span> - <span class="keyboard-button">6</span>
                </div>
                <div>
                    select chords
                </div>
            </div>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">esc</span>
                </div>
                <div>
                    close dialog boxes like this one
                </div>
            </div>
            <h3>Editor:</h3>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">up</span> / <span class="keyboard-button">down</span>
                </div>
                <div>
                    transpose the current note up / down
                </div>
            </div>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">shift</span> + <span class="keyboard-button">left</span> / <span class="keyboard-button">right</span>
                </div>
                <div>
                    move the current button left / right
                </div>
            </div>
            <div class="keyboard-shortcut">
                <div>
                    <span class="keyboard-button">shift</span> + <span class="keyboard-button">backspace</span>
                </div>
                <div>
                    delete the current button
                </div>
            </div>
        </div>
    </div>

    <script src="./assets/js/notes.js"></script>
    <script src="./assets/js/layouts.js"></script>
    <script src="./assets/js/viewer.js"></script>
    <script src="./assets/js/editor.js"></script>
</body>
</html>
